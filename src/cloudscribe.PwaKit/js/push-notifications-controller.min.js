const PushNotificationsController=function(){function n(n){const r="=".repeat((4-n.length%4)%4),u=(n+r).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(u),i=new Uint8Array(t.length);for(let n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}return{retrievePublicKey:function(){return fetch("/pwa/getpublickey").then(function(t){return t.ok?t.text().then(function(t){return n(t)}):Promise.reject(t.status+" "+t.statusText)})},storePushSubscription:function(n){return fetch("/pwa/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},discardPushSubscription:function(n){return fetch("/pwa/subscription?endpoint="+encodeURIComponent(n.endpoint),{method:"DELETE"})}}}();