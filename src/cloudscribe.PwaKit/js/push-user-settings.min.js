const PushNotificationSettings=function(){function f(){var u=document.querySelectorAll("[data-push-subscribe-button]"),f,r,s;for(i=0;i<u.length;++i)f=u[i],f.addEventListener("click",e);for(r=document.querySelectorAll("[data-push-unsubscribe-button]"),i=0;i<r.length;++i)s=r[i],s.addEventListener("click",o);n.pushManager.getSubscription().then(function(n){t(Notification.permission==="denied",n!==null)})}function t(n,t){var u=document.querySelectorAll("[data-push-subscribe-button]"),f,r,e;for(i=0;i<u.length;++i)f=u[i],f.style.display=n||t?"none":"block";for(r=document.querySelectorAll("[data-push-unsubscribe-button]"),i=0;i<r.length;++i)e=r[i],e.style.display=n||!t?"none":"block"}function e(){r?u():PushNotificationsController.retrievePublicKey().then(function(n){r=n;u()}).catch(function(n){console.log(n)})}function u(){n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r}).then(function(n){PushNotificationsController.storePushSubscription(n).then(function(n){n.ok?console.log("Successfully subscribed for Push Notifications"):console.log("Failed to store the Push Notifications subscrition on server")}).catch(function(n){console.log("Failed to store the Push Notifications subscrition on server: "+n)});t(!1,!0)}).catch(function(n){Notification.permission==="denied"?t(!0,!1):console.log("Failed to subscribe for Push Notifications: "+n)})}function o(){n.pushManager.getSubscription().then(function(n){n&&n.unsubscribe().then(function(){PushNotificationsController.discardPushSubscription(n).then(function(n){n.ok?console.log("Successfully unsubscribed from Push Notifications"):console.log("Failed to discard the Push Notifications subscrition from server")}).catch(function(n){console.log("Failed to discard the Push Notifications subscrition from server: "+n)});t(!1,!1)}).catch(function(n){console.log("Failed to unsubscribe from Push Notifications: "+n)})})}let r,n;return{initialize:function(t){n=t;n?(console.log("found registration"),f()):console.log("registration not found")}}}();document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){PushNotificationSettings.initialize(n)})});